import{r as n}from"./index.CBlmr9og.js";import{u as ce,a as L,b as J,c as q,d as j,C as ue,e as de,f as B,g as fe,T as $,t as pe,h as me,i as Q,j as he,s as ge,A as X,k as Z,l as ee,m as te,H as be,E as ye,n as G,o as Re}from"./useOpenChangeComplete.CT5euMim.js";import{j as W}from"./bundle-mjs.CvwOTdKa.js";import{u as F,A as k,b as ve}from"./floating-ui.utils.dom.DSpH5GCr.js";const ne=n.createContext(void 0);function _(){const t=n.useContext(ne);if(t===void 0)throw new Error("Base UI: AccordionRootContext is missing. Accordion parts must be placed within <Accordion.Root>.");return t}const Ce={value:()=>null},je=n.forwardRef(function(o,l){const{render:H,className:x,disabled:r=!1,hiddenUntilFound:p,keepMounted:v,loop:A=!0,onValueChange:C,multiple:m=!0,orientation:c="vertical",value:M,defaultValue:u,...O}=o,S=ce(),w=n.useMemo(()=>{if(M===void 0)return u!=null?u:[]},[M,u]),y=L(C),R=n.useRef([]),[h,g]=J({controlled:M,default:w,name:"Accordion",state:"value"}),d=n.useCallback((b,N)=>{const e=q("none");if(m)if(N){const s=h.slice();if(s.push(b),y(s,e),e.isCanceled)return;g(s)}else{const s=h.filter(a=>a!==b);if(y(s,e),e.isCanceled)return;g(s)}else{const s=h[0]===b?[]:[b];if(y(s,e),e.isCanceled)return;g(s)}},[y,m,g,h]),I=n.useMemo(()=>({value:h,disabled:r,orientation:c}),[h,r,c]),T=n.useMemo(()=>({accordionItemRefs:R,direction:S,disabled:r,handleValueChange:d,hiddenUntilFound:p!=null?p:!1,keepMounted:v!=null?v:!1,loop:A,orientation:c,state:I,value:h}),[S,r,d,p,v,A,c,I,h]),E=j("div",o,{state:I,ref:l,props:[{dir:S,role:"region"},O],stateAttributesMapping:Ce});return W.jsx(ne.Provider,{value:T,children:W.jsx(ue,{elementsRef:R,children:E})})});function xe(t){const{open:o,defaultOpen:l,onOpenChange:H,disabled:x}=t,r=o!==void 0,[p,v]=J({controlled:o,default:l,name:"Collapsible",state:"open"}),{mounted:A,setMounted:C,transitionStatus:m}=de(p,!0,!0),[c,M]=n.useState(p),[{height:u,width:O},S]=n.useState({height:void 0,width:void 0}),w=B(),[y,R]=n.useState(),h=y!=null?y:w,[g,d]=n.useState(!1),[I,T]=n.useState(!1),E=n.useRef(null),b=n.useRef(null),N=n.useRef(null),e=n.useRef(null),s=fe(e,!1),a=L(i=>{const f=!p,P=q("trigger-press",i.nativeEvent);if(H(f,P),P.isCanceled)return;const D=e.current;b.current==="css-animation"&&D!=null&&D.style.removeProperty("animation-name"),!g&&!I&&(b.current!=null&&b.current!=="css-animation"&&!A&&f&&C(!0),b.current==="css-animation"&&(!c&&f&&M(!0),!A&&f&&C(!0))),v(f),b.current==="none"&&A&&!f&&C(!1)});return F(()=>{r&&b.current==="none"&&!I&&!p&&C(!1)},[r,I,p,o,C]),n.useMemo(()=>({abortControllerRef:E,animationTypeRef:b,disabled:x,handleTrigger:a,height:u,mounted:A,open:p,panelId:h,panelRef:e,runOnceAnimationsFinish:s,setDimensions:S,setHiddenUntilFound:d,setKeepMounted:T,setMounted:C,setOpen:v,setPanelIdState:R,setVisible:M,transitionDimensionRef:N,transitionStatus:m,visible:c,width:O}),[E,b,x,a,u,A,p,h,e,s,S,d,T,C,v,M,N,m,c,O])}const oe=n.createContext(void 0);function se(){const t=n.useContext(oe);if(t===void 0)throw new Error("Base UI: CollapsibleRootContext is missing. Collapsible parts must be placed within <Collapsible.Root>.");return t}const ie=n.createContext(void 0);function K(){const t=n.useContext(ie);if(t===void 0)throw new Error("Base UI: AccordionItemContext is missing. Accordion parts must be placed within <Accordion.Item>.");return t}let V=(function(t){return t.open="data-open",t.closed="data-closed",t[t.startingStyle=$.startingStyle]="startingStyle",t[t.endingStyle=$.endingStyle]="endingStyle",t})({}),Ae=(function(t){return t.panelOpen="data-panel-open",t})({});const Me={[V.open]:""},Oe={[V.closed]:""},Se={open(t){return t?{[Ae.panelOpen]:""}:null}},Ie={open(t){return t?Me:Oe}};let Ee=(function(t){return t.index="data-index",t.disabled="data-disabled",t.open="data-open",t})({});const z={...Ie,index:t=>Number.isInteger(t)?{[Ee.index]:String(t)}:null,...pe,value:()=>null},We=n.forwardRef(function(o,l){const{className:H,disabled:x=!1,onOpenChange:r,render:p,value:v,...A}=o,{ref:C,index:m}=me(),c=Q(l,C),{disabled:M,handleValueChange:u,state:O,value:S}=_(),w=B(),y=v!=null?v:w,R=x||M,h=n.useMemo(()=>{if(!S)return!1;for(let a=0;a<S.length;a+=1)if(S[a]===y)return!0;return!1},[S,y]),g=L((a,i)=>{r==null||r(a,i),!i.isCanceled&&u(y,a)}),d=xe({open:h,onOpenChange:g,disabled:R}),I=n.useMemo(()=>({open:d.open,disabled:d.disabled,hidden:!d.mounted}),[d.open,d.disabled,d.mounted]),T=n.useMemo(()=>({...d,onOpenChange:g,state:I,transitionStatus:d.transitionStatus}),[d,I,g]),E=n.useMemo(()=>({...O,index:m,disabled:R,open:h}),[R,m,h,O]),[b,N]=n.useState(B()),e=n.useMemo(()=>({open:h,state:E,setTriggerId:N,triggerId:b}),[h,E,N,b]),s=j("div",o,{state:E,ref:c,props:A,stateAttributesMapping:z});return W.jsx(oe.Provider,{value:T,children:W.jsx(ie.Provider,{value:e,children:s})})}),Ve=n.forwardRef(function(o,l){const{render:H,className:x,...r}=o,{state:p}=K();return j("h3",o,{state:p,ref:l,props:r,stateAttributesMapping:z})}),Pe=new Set([X,Z,ee,te,be,ye]);function we(t){const{current:o}=t,l=[];for(let H=0;H<o.length;H+=1){const x=o[H];if(!G(x)){const r=x==null?void 0:x.querySelector('[type="button"]');G(r)||l.push(r)}}return l}const Le=n.forwardRef(function(o,l){const{disabled:H,className:x,id:r,render:p,nativeButton:v=!0,...A}=o,{panelId:C,open:m,handleTrigger:c,disabled:M}=se(),u=H!=null?H:M,{getButtonProps:O,buttonRef:S}=he({disabled:u,focusableWhenDisabled:!0,native:v}),{accordionItemRefs:w,direction:y,loop:R,orientation:h}=_(),g=y==="rtl",d=h==="horizontal",{state:I,setTriggerId:T,triggerId:E}=K();F(()=>(r&&T(r),()=>{T(void 0)}),[r,T]);const b=n.useMemo(()=>({"aria-controls":m?C:void 0,"aria-expanded":m,disabled:u,id:E,onClick:c,onKeyDown(e){if(!Pe.has(e.key))return;ge(e);const s=we(w),i=s.length-1;let f=-1;const P=s.indexOf(e.target);function D(){R?f=P+1>i?0:P+1:f=Math.min(P+1,i)}function U(){R?f=P===0?i:P-1:f=P-1}switch(e.key){case X:d||D();break;case Z:d||U();break;case ee:d&&(g?U():D());break;case te:d&&(g?D():U());break;case"Home":f=0;break;case"End":f=i;break}f>-1&&s[f].focus()}}),[w,u,c,E,d,g,R,m,C]);return j("button",o,{state:I,ref:[l,S],props:[b,A,O],stateAttributesMapping:Se})});let Te=(function(t){return t.disabled="data-disabled",t.orientation="data-orientation",t})({});function ke(t){const{abortControllerRef:o,animationTypeRef:l,externalRef:H,height:x,hiddenUntilFound:r,keepMounted:p,id:v,mounted:A,onOpenChange:C,open:m,panelRef:c,runOnceAnimationsFinish:M,setDimensions:u,setMounted:O,setOpen:S,setVisible:w,transitionDimensionRef:y,visible:R,width:h}=t,g=n.useRef(!1),d=n.useRef(null),I=n.useRef(m),T=n.useRef(m),E=n.useMemo(()=>l.current==="css-animation"?!R:!m&&!A,[m,A,R,l]),b=L(e=>{if(!e)return;if(l.current==null||y.current==null){const i=getComputedStyle(e),f=i.animationName!=="none"&&i.animationName!=="",P=i.transitionDuration!=="0s"&&i.transitionDuration!=="";f&&P||(i.animationName==="none"&&i.transitionDuration!=="0s"?l.current="css-transition":i.animationName!=="none"&&i.transitionDuration==="0s"?l.current="css-animation":l.current="none"),e.getAttribute(Te.orientation)==="horizontal"||i.transitionProperty.indexOf("width")>-1?y.current="width":y.current="height"}if(l.current!=="css-transition")return;e.style.setProperty("display",getComputedStyle(e).display||"block","important"),(x===void 0||h===void 0)&&(u({height:e.scrollHeight,width:e.scrollWidth}),e.style.removeProperty("display"),T.current&&e.style.setProperty("transition-duration","0s"));let s=-1,a=-1;return s=k.request(()=>{T.current=!1,a=k.request(()=>{setTimeout(()=>{e.style.removeProperty("transition-duration")})})}),()=>{k.cancel(s),k.cancel(a)}}),N=Q(H,c,b);return F(()=>{if(l.current!=="css-transition")return;const e=c.current;if(!e)return;let s=-1;if(o.current!=null&&(o.current.abort(),o.current=null),m){const a={"justify-content":e.style.justifyContent,"align-items":e.style.alignItems,"align-content":e.style.alignContent,"justify-items":e.style.justifyItems};e.style.setProperty("display",getComputedStyle(e).display||"block","important"),Object.keys(a).forEach(i=>{e.style.setProperty(i,"initial","important")}),!T.current&&!p&&e.setAttribute(V.startingStyle,""),u({height:e.scrollHeight,width:e.scrollWidth}),s=k.request(()=>{e.style.removeProperty("display"),Object.entries(a).forEach(([i,f])=>{f===""?e.style.removeProperty(i):e.style.setProperty(i,f)})})}else{u({height:e.scrollHeight,width:e.scrollWidth}),o.current=new AbortController;const a=o.current.signal;let i=-1;const f=k.request(()=>{i=k.request(()=>{M(()=>{u({height:0,width:0}),e.style.removeProperty("content-visibility"),e.style.removeProperty("display"),O(!1),o.current=null},a)})});return()=>{k.cancel(f),k.cancel(i)}}return()=>{k.cancel(s)}},[o,l,r,p,A,m,c,M,u,O,y]),F(()=>{if(l.current!=="css-animation")return;const e=c.current;e&&(d.current=e.style.animationName||d.current,e.style.setProperty("animation-name","none"),u({height:e.scrollHeight,width:e.scrollWidth}),!I.current&&!g.current&&e.style.removeProperty("animation-name"),m?(o.current!=null&&(o.current.abort(),o.current=null),O(!0),w(!0)):(o.current=new AbortController,M(()=>{O(!1),w(!1),o.current=null},o.current.signal)))},[o,l,m,c,M,u,O,w,R]),ve(()=>{const e=k.request(()=>{I.current=!1});return()=>k.cancel(e)}),F(()=>{if(!r)return;const e=c.current;if(!e)return;let s=-1,a=-1;return m&&g.current&&(e.style.transitionDuration="0s",u({height:e.scrollHeight,width:e.scrollWidth}),s=k.request(()=>{g.current=!1,a=k.request(()=>{setTimeout(()=>{e.style.removeProperty("transition-duration")})})})),()=>{k.cancel(s),k.cancel(a)}},[r,m,c,u]),F(()=>{const e=c.current;e&&r&&E&&(e.setAttribute("hidden","until-found"),l.current==="css-transition"&&e.setAttribute(V.startingStyle,""))},[r,E,l,c]),n.useEffect(function(){const s=c.current;if(!s)return;function a(i){g.current=!0,S(!0),C(!0,q("none",i))}return s.addEventListener("beforematch",a),()=>{s.removeEventListener("beforematch",a)}},[C,c,S]),n.useMemo(()=>({props:{hidden:E,id:v,ref:N}}),[E,v,N])}let Y=(function(t){return t.accordionPanelHeight="--accordion-panel-height",t.accordionPanelWidth="--accordion-panel-width",t})({});const Be=n.forwardRef(function(o,l){const{className:H,hiddenUntilFound:x,keepMounted:r,id:p,render:v,...A}=o,{hiddenUntilFound:C,keepMounted:m}=_(),{abortControllerRef:c,animationTypeRef:M,height:u,mounted:O,onOpenChange:S,open:w,panelId:y,panelRef:R,runOnceAnimationsFinish:h,setDimensions:g,setHiddenUntilFound:d,setKeepMounted:I,setMounted:T,setOpen:E,setVisible:b,transitionDimensionRef:N,visible:e,width:s,setPanelIdState:a,transitionStatus:i}=se(),f=x!=null?x:C,P=r!=null?r:m;F(()=>{if(p)return a(p),()=>{a(void 0)}},[p,a]),F(()=>{d(f)},[d,f]),F(()=>{I(P)},[I,P]),Re({open:w&&i==="idle",ref:R,onComplete(){w&&g({width:void 0,height:void 0})}});const{props:D}=ke({abortControllerRef:c,animationTypeRef:M,externalRef:l,height:u,hiddenUntilFound:f,id:p!=null?p:y,keepMounted:P,mounted:O,onOpenChange:S,open:w,panelRef:R,runOnceAnimationsFinish:h,setDimensions:g,setMounted:T,setOpen:E,setVisible:b,transitionDimensionRef:N,visible:e,width:s}),{state:U,triggerId:re}=K(),ae=n.useMemo(()=>({...U,transitionStatus:i}),[U,i]),le=j("div",o,{state:ae,ref:[l,R],props:[D,{"aria-labelledby":re,role:"region",style:{[Y.accordionPanelHeight]:u===void 0?"auto":"".concat(u,"px"),[Y.accordionPanelWidth]:s===void 0?"auto":"".concat(s,"px")}},A],stateAttributesMapping:z});return P||f||!P&&O?le:null});export{je as A,Ve as a,Le as b,Be as c,We as d};
