import{r as n}from"./index.CBlmr9og.js";import{f as B,u as de,a as V,b as Z,c as L,C as fe,d as K,n as ee,e as pe,g as q,h as me,t as he,T as J,i as ge,j as be,k as te,l as ye,s as Re,A as ne,m as oe,o as re,p as se,H as ve,E as xe,q as Q,r as Ce}from"./useOpenChangeComplete.i3I262J1.js";import{j as _}from"./bundle-mjs.BglWWEXk.js";import{b as D,c as Se,A as k,a as Me}from"./floating-ui.utils.dom.5K4CvxvD.js";const ie=n.createContext(void 0);function z(){const t=n.useContext(ie);if(t===void 0)throw new Error(B(10));return t}const Oe={value:()=>null},_e=n.forwardRef(function(r,l){const{render:T,className:S,disabled:i=!1,hiddenUntilFound:p,keepMounted:v,loopFocus:M=!0,onValueChange:x,multiple:h=!1,orientation:d="vertical",value:O,defaultValue:f,...A}=r,E=de(),w=n.useMemo(()=>{if(O===void 0)return f!=null?f:[]},[O,f]),C=V(x),R=n.useRef([]),[b,y]=Z({controlled:O,default:w,name:"Accordion",state:"value"}),u=V((m,N)=>{const g=K(ee);if(h)if(N){const e=b.slice();if(e.push(m),C(e,g),g.isCanceled)return;y(e)}else{const e=b.filter(c=>c!==m);if(C(e,g),g.isCanceled)return;y(e)}else{const e=b[0]===m?[]:[m];if(C(e,g),g.isCanceled)return;y(e)}}),I=n.useMemo(()=>({value:b,disabled:i,orientation:d}),[b,i,d]),P=n.useMemo(()=>({accordionItemRefs:R,direction:E,disabled:i,handleValueChange:u,hiddenUntilFound:p!=null?p:!1,keepMounted:v!=null?v:!1,loopFocus:M,orientation:d,state:I,value:b}),[E,i,u,p,v,M,d,I,b]),F=L("div",r,{state:I,ref:l,props:[{dir:E,role:"region"},A],stateAttributesMapping:Oe});return _.jsx(ie.Provider,{value:P,children:_.jsx(fe,{elementsRef:R,children:F})})});function Ae(t){const{open:r,defaultOpen:l,onOpenChange:T,disabled:S}=t,i=r!==void 0,[p,v]=Z({controlled:r,default:l,name:"Collapsible",state:"open"}),{mounted:M,setMounted:x,transitionStatus:h}=pe(p,!0,!0),[d,O]=n.useState(p),[{height:f,width:A},E]=n.useState({height:void 0,width:void 0}),w=q(),[C,R]=n.useState(),b=C!=null?C:w,[y,u]=n.useState(!1),[I,P]=n.useState(!1),F=n.useRef(null),m=n.useRef(null),N=n.useRef(null),g=n.useRef(null),e=me(g,!1),c=V(s=>{const o=!p,a=K(he,s.nativeEvent);if(T(o,a),a.isCanceled)return;const H=g.current;m.current==="css-animation"&&H!=null&&H.style.removeProperty("animation-name"),!y&&!I&&(m.current!=null&&m.current!=="css-animation"&&!M&&o&&x(!0),m.current==="css-animation"&&(!d&&o&&O(!0),!M&&o&&x(!0))),v(o),m.current==="none"&&M&&!o&&x(!1)});return D(()=>{i&&m.current==="none"&&!I&&!p&&x(!1)},[i,I,p,r,x]),n.useMemo(()=>({abortControllerRef:F,animationTypeRef:m,disabled:S,handleTrigger:c,height:f,mounted:M,open:p,panelId:b,panelRef:g,runOnceAnimationsFinish:e,setDimensions:E,setHiddenUntilFound:u,setKeepMounted:P,setMounted:x,setOpen:v,setPanelIdState:R,setVisible:O,transitionDimensionRef:N,transitionStatus:h,visible:d,width:A}),[F,m,S,c,f,M,p,b,g,e,E,u,P,x,v,O,N,h,d,A])}const ae=n.createContext(void 0);function le(){const t=n.useContext(ae);if(t===void 0)throw new Error(B(15));return t}const ce=n.createContext(void 0);function $(){const t=n.useContext(ce);if(t===void 0)throw new Error(B(9));return t}let j=(function(t){return t.open="data-open",t.closed="data-closed",t[t.startingStyle=J.startingStyle]="startingStyle",t[t.endingStyle=J.endingStyle]="endingStyle",t})({}),Ee=(function(t){return t.panelOpen="data-panel-open",t})({});const Ie={[j.open]:""},we={[j.closed]:""},Pe={open(t){return t?{[Ee.panelOpen]:""}:null}},Fe={open(t){return t?Ie:we}};let Te=(function(t){return t.index="data-index",t.disabled="data-disabled",t.open="data-open",t})({});const G={...Fe,index:t=>Number.isInteger(t)?{[Te.index]:String(t)}:null,...ge,value:()=>null},qe=n.forwardRef(function(r,l){const{className:T,disabled:S=!1,onOpenChange:i,render:p,value:v,...M}=r,{ref:x,index:h}=be(),d=te(l,x),{disabled:O,handleValueChange:f,state:A,value:E}=z(),w=q(),C=v!=null?v:w,R=S||O,b=n.useMemo(()=>{if(!E)return!1;for(let c=0;c<E.length;c+=1)if(E[c]===C)return!0;return!1},[E,C]),y=V((c,s)=>{i==null||i(c,s),!s.isCanceled&&f(C,c)}),u=Ae({open:b,onOpenChange:y,disabled:R}),I=n.useMemo(()=>({open:u.open,disabled:u.disabled,hidden:!u.mounted,transitionStatus:u.transitionStatus}),[u.open,u.disabled,u.mounted,u.transitionStatus]),P=n.useMemo(()=>({...u,onOpenChange:y,state:I}),[u,I,y]),F=n.useMemo(()=>({...A,index:h,disabled:R,open:b}),[R,h,b,A]),[m,N]=n.useState(q()),g=n.useMemo(()=>({open:b,state:F,setTriggerId:N,triggerId:m}),[b,F,N,m]),e=L("div",r,{state:F,ref:d,props:M,stateAttributesMapping:G});return _.jsx(ae.Provider,{value:P,children:_.jsx(ce.Provider,{value:g,children:e})})}),Be=n.forwardRef(function(r,l){const{render:T,className:S,...i}=r,{state:p}=$();return L("h3",r,{state:p,ref:l,props:i,stateAttributesMapping:G})}),He=new Set([ne,oe,re,se,ve,xe]);function Ne(t){const{current:r}=t,l=[];for(let T=0;T<r.length;T+=1){const S=r[T];if(!Q(S)){const i=S==null?void 0:S.querySelector('[type="button"]');Q(i)||l.push(i)}}return l}const Ke=n.forwardRef(function(r,l){const{disabled:T,className:S,id:i,render:p,nativeButton:v=!0,...M}=r,{panelId:x,open:h,handleTrigger:d,disabled:O}=le(),f=T!=null?T:O,{getButtonProps:A,buttonRef:E}=ye({disabled:f,focusableWhenDisabled:!0,native:v}),{accordionItemRefs:w,direction:C,loopFocus:R,orientation:b}=z(),y=C==="rtl",u=b==="horizontal",{state:I,setTriggerId:P,triggerId:F}=$();D(()=>(i&&P(i),()=>{P(void 0)}),[i,P]);const m=n.useMemo(()=>({"aria-controls":h?x:void 0,"aria-expanded":h,disabled:f,id:F,onClick:d,onKeyDown(g){if(!He.has(g.key))return;Re(g);const e=Ne(w),s=e.length-1;let o=-1;const a=e.indexOf(g.target);function H(){R?o=a+1>s?0:a+1:o=Math.min(a+1,s)}function W(){R?o=a===0?s:a-1:o=a-1}switch(g.key){case ne:u||H();break;case oe:u||W();break;case re:u&&(y?W():H());break;case se:u&&(y?H():W());break;case"Home":o=0;break;case"End":o=s;break}o>-1&&e[o].focus()}}),[w,f,d,F,u,y,R,h,x]);return L("button",r,{state:I,ref:[l,E],props:[m,M,A],stateAttributesMapping:Pe})});let ke=(function(t){return t.disabled="data-disabled",t.orientation="data-orientation",t})({});function De(t){const{abortControllerRef:r,animationTypeRef:l,externalRef:T,height:S,hiddenUntilFound:i,keepMounted:p,id:v,mounted:M,onOpenChange:x,open:h,panelRef:d,runOnceAnimationsFinish:O,setDimensions:f,setMounted:A,setOpen:E,setVisible:w,transitionDimensionRef:C,visible:R,width:b}=t,y=n.useRef(!1),u=n.useRef(null),I=n.useRef(h),P=n.useRef(h),F=Se(),m=n.useMemo(()=>l.current==="css-animation"?!R:!h&&!M,[h,M,R,l]),N=V(e=>{if(!e)return;if(l.current==null||C.current==null){const o=getComputedStyle(e),a=o.animationName!=="none"&&o.animationName!=="",H=o.transitionDuration!=="0s"&&o.transitionDuration!=="";a&&H||(o.animationName==="none"&&o.transitionDuration!=="0s"?l.current="css-transition":o.animationName!=="none"&&o.transitionDuration==="0s"?l.current="css-animation":l.current="none"),e.getAttribute(ke.orientation)==="horizontal"||o.transitionProperty.indexOf("width")>-1?C.current="width":C.current="height"}if(l.current!=="css-transition")return;(S===void 0||b===void 0)&&(f({height:e.scrollHeight,width:e.scrollWidth}),P.current&&e.style.setProperty("transition-duration","0s"));let c=-1,s=-1;return c=k.request(()=>{P.current=!1,s=k.request(()=>{setTimeout(()=>{e.style.removeProperty("transition-duration")})})}),()=>{k.cancel(c),k.cancel(s)}}),g=te(T,d,N);return D(()=>{if(l.current!=="css-transition")return;const e=d.current;if(!e)return;let c=-1;if(r.current!=null&&(r.current.abort(),r.current=null),h){const s={"justify-content":e.style.justifyContent,"align-items":e.style.alignItems,"align-content":e.style.alignContent,"justify-items":e.style.justifyItems};Object.keys(s).forEach(o=>{e.style.setProperty(o,"initial","important")}),!P.current&&!p&&e.setAttribute(j.startingStyle,""),f({height:e.scrollHeight,width:e.scrollWidth}),c=k.request(()=>{Object.entries(s).forEach(([o,a])=>{a===""?e.style.removeProperty(o):e.style.setProperty(o,a)})})}else{if(e.scrollHeight===0&&e.scrollWidth===0)return;f({height:e.scrollHeight,width:e.scrollWidth});const s=new AbortController;r.current=s;const o=s.signal;let a=null;const H=j.endingStyle;return a=new MutationObserver(W=>{W.some(U=>U.type==="attributes"&&U.attributeName===H)&&(a==null||a.disconnect(),a=null,O(()=>{f({height:0,width:0}),e.style.removeProperty("content-visibility"),A(!1),r.current===s&&(r.current=null)},o))}),a.observe(e,{attributes:!0,attributeFilter:[H]}),()=>{a==null||a.disconnect(),F.cancel(),r.current===s&&(s.abort(),r.current=null)}}return()=>{k.cancel(c)}},[r,l,F,i,p,M,h,d,O,f,A]),D(()=>{if(l.current!=="css-animation")return;const e=d.current;e&&(u.current=e.style.animationName||u.current,e.style.setProperty("animation-name","none"),f({height:e.scrollHeight,width:e.scrollWidth}),!I.current&&!y.current&&e.style.removeProperty("animation-name"),h?(r.current!=null&&(r.current.abort(),r.current=null),A(!0),w(!0)):(r.current=new AbortController,O(()=>{A(!1),w(!1),r.current=null},r.current.signal)))},[r,l,h,d,O,f,A,w,R]),Me(()=>{const e=k.request(()=>{I.current=!1});return()=>k.cancel(e)}),D(()=>{if(!i)return;const e=d.current;if(!e)return;let c=-1,s=-1;return h&&y.current&&(e.style.transitionDuration="0s",f({height:e.scrollHeight,width:e.scrollWidth}),c=k.request(()=>{y.current=!1,s=k.request(()=>{setTimeout(()=>{e.style.removeProperty("transition-duration")})})})),()=>{k.cancel(c),k.cancel(s)}},[i,h,d,f]),D(()=>{const e=d.current;e&&i&&m&&(e.setAttribute("hidden","until-found"),l.current==="css-transition"&&e.setAttribute(j.startingStyle,""))},[i,m,l,d]),n.useEffect(function(){const c=d.current;if(!c)return;function s(o){y.current=!0,E(!0),x(!0,K(ee,o))}return c.addEventListener("beforematch",s),()=>{c.removeEventListener("beforematch",s)}},[x,d,E]),n.useMemo(()=>({props:{hidden:m,id:v,ref:g}}),[m,v,g])}let X=(function(t){return t.accordionPanelHeight="--accordion-panel-height",t.accordionPanelWidth="--accordion-panel-width",t})({});const ze=n.forwardRef(function(r,l){const{className:T,hiddenUntilFound:S,keepMounted:i,id:p,render:v,...M}=r,{hiddenUntilFound:x,keepMounted:h}=z(),{abortControllerRef:d,animationTypeRef:O,height:f,mounted:A,onOpenChange:E,open:w,panelId:C,panelRef:R,runOnceAnimationsFinish:b,setDimensions:y,setHiddenUntilFound:u,setKeepMounted:I,setMounted:P,setOpen:F,setVisible:m,transitionDimensionRef:N,visible:g,width:e,setPanelIdState:c,transitionStatus:s}=le(),o=S!=null?S:x,a=i!=null?i:h;D(()=>{if(p)return c(p),()=>{c(void 0)}},[p,c]),D(()=>{u(o)},[u,o]),D(()=>{I(a)},[I,a]),Ce({open:w&&s==="idle",ref:R,onComplete(){w&&y({width:void 0,height:void 0})}});const{props:H}=De({abortControllerRef:d,animationTypeRef:O,externalRef:l,height:f,hiddenUntilFound:o,id:p!=null?p:C,keepMounted:a,mounted:A,onOpenChange:E,open:w,panelRef:R,runOnceAnimationsFinish:b,setDimensions:y,setMounted:P,setOpen:F,setVisible:m,transitionDimensionRef:N,visible:g,width:e}),{state:W,triggerId:Y}=$(),U=n.useMemo(()=>({...W,transitionStatus:s}),[W,s]),ue=L("div",r,{state:U,ref:[l,R],props:[H,{"aria-labelledby":Y,role:"region",style:{[X.accordionPanelHeight]:f===void 0?"auto":"".concat(f,"px"),[X.accordionPanelWidth]:e===void 0?"auto":"".concat(e,"px")}},M],stateAttributesMapping:G});return a||o||!a&&A?ue:null});export{_e as A,Be as a,Ke as b,ze as c,qe as d};
