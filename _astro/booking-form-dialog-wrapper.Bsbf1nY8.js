var _=Object.defineProperty;var U=(r,e,t)=>e in r?_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var c=(r,e,t)=>U(r,typeof e!="symbol"?e+"":e,t);import{j as f,t as G}from"./bundle-mjs.BglWWEXk.js";import{u as J,a as X,c as Q,b as M}from"./dialog.B-fI56Xx.js";import{c as W}from"./clsx.B-dksMZM.js";import{r as u}from"./index.CBlmr9og.js";import"./buffer.BPDYedtS.js";import{S as Z}from"./sprite.BCEAcEq8.js";import{g as B,i as V}from"./floating-ui.utils.dom.BfwBRLju.js";import{i as tt}from"./isFunction.BGFdVicR.js";import"./index.CMF_dOlt.js";function et(){}const R=typeof navigator<"u",F=lt(),rt=it(),ot=ct(),nt=typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none"),st=F.platform==="MacIntel"&&F.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(F.platform);R&&rt.toLowerCase().startsWith("mac")&&navigator.maxTouchPoints;ot.includes("jsdom/");function lt(){var e,t;if(!R)return{platform:"",maxTouchPoints:-1};const r=navigator.userAgentData;return r!=null&&r.platform?{platform:r.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:(e=navigator.platform)!=null?e:"",maxTouchPoints:(t=navigator.maxTouchPoints)!=null?t:-1}}function ct(){if(!R)return"";const r=navigator.userAgentData;return r&&Array.isArray(r.brands)?r.brands.map(({brand:e,version:t})=>"".concat(e,"/").concat(t)).join(" "):navigator.userAgent}function it(){var e;if(!R)return"";const r=navigator.userAgentData;return r!=null&&r.platform?r.platform:(e=navigator.platform)!=null?e:""}function T(r){return(r==null?void 0:r.ownerDocument)||document}const at=()=>{},ut=typeof document<"u"?u.useLayoutEffect:at,k=0;class O{constructor(){c(this,"currentId",k);c(this,"clear",()=>{this.currentId!==k&&(clearTimeout(this.currentId),this.currentId=k)});c(this,"disposeEffect",()=>this.clear)}static create(){return new O}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=k,t()},e)}isStarted(){return this.currentId!==k}}const L=null;class ft{constructor(){c(this,"callbacks",[]);c(this,"callbacksCount",0);c(this,"nextId",1);c(this,"startId",1);c(this,"isScheduled",!1);c(this,"tick",e=>{var l;this.isScheduled=!1;const t=this.callbacks,s=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,s>0)for(let i=0;i<t.length;i+=1)(l=t[i])==null||l.call(t,e)})}request(e){const t=this.nextId;return this.nextId+=1,this.callbacks.push(e),this.callbacksCount+=1,(!this.isScheduled||!1)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),t}cancel(e){const t=e-this.startId;t<0||t>=this.callbacks.length||(this.callbacks[t]=null,this.callbacksCount-=1)}}const C=new ft;class A{constructor(){c(this,"currentId",L);c(this,"cancel",()=>{this.currentId!==L&&(C.cancel(this.currentId),this.currentId=L)});c(this,"disposeEffect",()=>this.cancel)}static create(){return new A}static request(e){return C.request(e)}static cancel(e){return C.cancel(e)}request(e){this.cancel(),this.currentId=C.request(()=>{this.currentId=L,e()})}}function dt(){}let z={},K={},$="";function ht(r){if(typeof document>"u")return!1;const e=T(r);return B(e).innerWidth-e.documentElement.clientWidth>0}function mt(r){const e=T(r),t=e.documentElement,s=e.body,l=V(t)?t:s,i=l.style.overflow;return l.style.overflow="hidden",()=>{l.style.overflow=i}}function vt(r){var p,y,x;const e=T(r),t=e.documentElement,s=e.body,l=B(t);let i=0,v=0;const h=A.create(),g=typeof CSS<"u"&&((p=CSS.supports)==null?void 0:p.call(CSS,"scrollbar-gutter","stable"));if(nt&&((x=(y=l.visualViewport)==null?void 0:y.scale)!=null?x:1)!==1)return()=>{};function a(){const w=l.getComputedStyle(t),m=l.getComputedStyle(s),I=(w.scrollbarGutter||"").includes("both-edges")?"stable both-edges":"stable";i=t.scrollTop,v=t.scrollLeft,z={scrollbarGutter:t.style.scrollbarGutter,overflowY:t.style.overflowY,overflowX:t.style.overflowX},$=t.style.scrollBehavior,K={position:s.style.position,height:s.style.height,width:s.style.width,boxSizing:s.style.boxSizing,overflowY:s.style.overflowY,overflowX:s.style.overflowX,scrollBehavior:s.style.scrollBehavior};const o=t.scrollHeight>t.clientHeight,n=t.scrollWidth>t.clientWidth,d=w.overflowY==="scroll"||m.overflowY==="scroll",S=w.overflowX==="scroll"||m.overflowX==="scroll",Y=Math.max(0,l.innerWidth-t.clientWidth),H=Math.max(0,l.innerHeight-t.clientHeight),N=parseFloat(m.marginTop)+parseFloat(m.marginBottom),P=parseFloat(m.marginLeft)+parseFloat(m.marginRight),q=V(t)?t:s;if(g){t.style.scrollbarGutter=I,q.style.overflowY="hidden",q.style.overflowX="hidden";return}Object.assign(t.style,{scrollbarGutter:I,overflowY:"hidden",overflowX:"hidden"}),(o||d)&&(t.style.overflowY="scroll"),(n||S)&&(t.style.overflowX="scroll"),Object.assign(s.style,{position:"relative",height:N||H?"calc(100dvh - ".concat(N+H,"px)"):"100dvh",width:P||Y?"calc(100vw - ".concat(P+Y,"px)"):"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),s.scrollTop=i,s.scrollLeft=v,t.setAttribute("data-base-ui-scroll-locked",""),t.style.scrollBehavior="unset"}function b(){Object.assign(t.style,z),Object.assign(s.style,K),g||(t.scrollTop=i,t.scrollLeft=v,t.removeAttribute("data-base-ui-scroll-locked"),t.style.scrollBehavior=$)}function E(){b(),h.request(a)}return a(),l.addEventListener("resize",E),()=>{h.cancel(),b(),typeof l.removeEventListener=="function"&&l.removeEventListener("resize",E)}}class pt{constructor(){c(this,"lockCount",0);c(this,"restore",null);c(this,"timeoutLock",O.create());c(this,"timeoutUnlock",O.create());c(this,"release",()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)});c(this,"unlock",()=>{var e;this.lockCount===0&&this.restore&&((e=this.restore)==null||e.call(this),this.restore=null)})}acquire(e){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(e)),this.release}lock(e){if(this.lockCount===0||this.restore!==null)return;const s=T(e).documentElement,l=B(s).getComputedStyle(s).overflowY;if(l==="hidden"||l==="clip"){this.restore=dt;return}const i=st||!ht(e);this.restore=i?mt(e):vt(e)}}const gt=new pt;function wt(r=!0,e=null){ut(()=>{if(r)return gt.acquire(e)},[r,e])}const bt=r=>{const{referenceElement:e}=r;return wt(!0,e.current),null},Tt=({closeButtonTitle:r,children:e})=>{const t=u.useRef(null),s=u.useRef(null),l=u.useRef(null),i=u.useRef(null),v=u.useRef(null),h=u.useRef(!1),g=u.useRef(!1),a=J(M),b=()=>{const o=t.current;t.current=null,o&&o instanceof HTMLElement&&"focus"in o&&tt(o.focus)&&o.focus({preventScroll:!0})},E=()=>{!a||h.current||(b(),M.set(!1),g.current=!1)},p=()=>{a&&(g.current=!0,h.current=!1,E())},y=u.useEffectEvent(()=>{a&&(h.current=!0)}),x=u.useEffectEvent(()=>{a&&(h.current=!1)}),w=u.useEffectEvent(o=>{if(!(a&&v.current)||g.current)return;const n=o.target;!(n&&n instanceof HTMLElement)||v.current.contains(n)||p()});u.useLayoutEffect(()=>{const o={passive:!0},n="focus",d="blur",S="focusin";return X.set(!0),window.addEventListener(d,y,o),window.addEventListener(n,x,o),document.addEventListener(S,w,o),()=>{X.set(!1),window.removeEventListener(d,y,o),window.removeEventListener(n,x,o),document.removeEventListener(S,w,o)}},[]),u.useLayoutEffect(()=>{if(!(a&&i.current))return et;t.current=document.activeElement,(l.current?l.current:i.current).focus({preventScroll:!0})},[a]);const m=o=>{s.current=o;let n;if(o){const d=()=>o.querySelector("iframe");i.current=d(),i.current||(n=new MutationObserver(()=>{i.current=d(),n==null||n.disconnect(),n=void 0}),n.observe(o,{childList:!0}))}return()=>{n==null||n.disconnect(),n=void 0,t.current=null,s.current=null,i.current=null,h.current=!1}},j=u.useEffectEvent(o=>{var d;if(!o.data||typeof o.data!="string")return;let n;try{if(n=JSON.parse(o.data),!n)throw new Error("Невалидный JSON")}catch(S){return}switch(!0){case n.func==="amoformsSuccessSubmit":{(d=window.ym)==null||d.call(window,103900658,"reachGoal","amoforms_send");return}default:return}});u.useEffect(()=>{const o="message",n={passive:!0};return window.addEventListener(o,j,n),()=>{window.removeEventListener(o,j,n)}},[]);const D=o=>{if(a)switch(o.key){case"Escape":o.preventDefault(),p();return;default:return}},I=o=>{if(a)switch(!0){case(o.shiftKey&&o.key==="Tab"):o.preventDefault(),b();return;default:return}};return f.jsxs(f.Fragment,{children:[a&&f.jsx(bt,{referenceElement:s}),f.jsxs("div",{"aria-hidden":!a,className:G("pointer-events-none w-full select-none opacity-0 transition-opacity",W({"pointer-events-auto select-auto opacity-100":a})),ref:v,role:"none",children:[f.jsx("div",{"aria-hidden":"true",className:"fixed inset-0 min-h-dvh select-none bg-backdrop text-on-backdrop opacity-20 transition-all duration-150 supports-[-webkit-touch-callout:none]:absolute",onClick:p,role:"none"}),f.jsx("div",{"aria-modal":"true",className:"fixed inset-0 m-auto flex max-h-screen min-h-full w-full min-w-0 flex-col overflow-y-auto bg-[#132d40] text-on-secondary shadow outline-offset-0 supports-h-dvh:min-h-dvh 2xl:max-h-[calc(100vh-4rem)] 2xl:min-h-0 2xl:max-w-270 2xl:rounded-2xl 2xl:outline-2 2xl:outline-primary",id:Q,onKeyDown:D,ref:m,role:"dialog",tabIndex:-1,children:f.jsxs("div",{className:"relative h-full w-full overflow-auto",role:"none",children:[f.jsxs("div",{className:"relative z-10 h-full w-full grow",role:"none",children:[f.jsx("div",{className:"pointer-events-none absolute inset-0 h-full w-full select-none border-none outline-transparent",onKeyDown:I,ref:l,role:"none",tabIndex:0}),e]}),f.jsx("div",{className:"absolute top-0 right-2 z-50 2xl:top-0 2xl:right-0 rtl:right-auto rtl:left-2 rtl:2xl:right-auto rtl:2xl:left-0",role:"none",children:f.jsx("button",{"aria-label":r,className:G("cursor-pointer rounded-2xl p-4 outline-offset-0",W({hidden:!a})),onClick:p,type:"button",children:f.jsx(Z,{height:"24",id:"close_current_color",width:"24"})})})]})})]})]})};export{Tt as BookingFormDialogWrapper};
