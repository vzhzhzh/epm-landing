var z=Object.defineProperty;var A=(c,t,e)=>t in c?z(c,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[t]=e;var p=(c,t,e)=>A(c,typeof t!="symbol"?t+"":t,e);import{j as m,t as j}from"./bundle-mjs.CvwOTdKa.js";import{i as X,o as S,T as B,a as K}from"./useTimeout.bU12MHB1.js";import{u as H,g as O,N as M,A as U}from"./floating-ui.utils.dom.DSpH5GCr.js";import{u as q,a as I,c as G,b as Y}from"./dialog.tDsxiorO.js";import{c as D}from"./clsx.B-dksMZM.js";import{r as u}from"./index.CBlmr9og.js";import"./buffer.BPDYedtS.js";import{S as _}from"./sprite.Cbzg99uA.js";import{i as P}from"./isFunction.BGFdVicR.js";import"./index.CMF_dOlt.js";function $(){}let N={},T={},W="";function V(c){if(typeof document>"u")return!1;const t=S(c);return O(t).innerWidth-t.documentElement.clientWidth>0}function J(c){const e=S(c).documentElement,r=e.style.overflow;return e.style.overflow="hidden",()=>{e.style.overflow=r}}function Q(c){var k,v;const t=S(c),e=t.documentElement,r=t.body,l=O(e);let s=0,f=0;const a=U.create();if(X&&((v=(k=l.visualViewport)==null?void 0:k.scale)!=null?v:1)!==1)return()=>{};function w(){var F;const b=l.getComputedStyle(e),d=l.getComputedStyle(r);s=e.scrollTop,f=e.scrollLeft,N={scrollbarGutter:e.style.scrollbarGutter,overflowY:e.style.overflowY,overflowX:e.style.overflowX},W=e.style.scrollBehavior,T={position:r.style.position,height:r.style.height,width:r.style.width,boxSizing:r.style.boxSizing,overflowY:r.style.overflowY,overflowX:r.style.overflowX,scrollBehavior:r.style.scrollBehavior};const g=typeof CSS<"u"&&((F=CSS.supports)==null?void 0:F.call(CSS,"scrollbar-gutter","stable")),E=e.scrollHeight>e.clientHeight,L=e.scrollWidth>e.clientWidth,C=b.overflowY==="scroll"||d.overflowY==="scroll",o=b.overflowX==="scroll"||d.overflowX==="scroll",n=Math.max(0,l.innerWidth-e.clientWidth),h=Math.max(0,l.innerHeight-e.clientHeight),x=parseFloat(d.marginTop)+parseFloat(d.marginBottom),R=parseFloat(d.marginLeft)+parseFloat(d.marginRight);Object.assign(e.style,{scrollbarGutter:"stable",overflowY:!g&&(E||C)?"scroll":"hidden",overflowX:!g&&(L||o)?"scroll":"hidden"}),Object.assign(r.style,{position:"relative",height:x||h?"calc(100dvh - ".concat(x+h,"px)"):"100dvh",width:R||n?"calc(100vw - ".concat(R+n,"px)"):"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),r.scrollTop=s,r.scrollLeft=f,e.setAttribute("data-base-ui-scroll-locked",""),e.style.scrollBehavior="unset"}function i(){Object.assign(e.style,N),Object.assign(r.style,T),e.scrollTop=s,e.scrollLeft=f,e.removeAttribute("data-base-ui-scroll-locked"),e.style.scrollBehavior=W}function y(){i(),a.request(w)}return w(),l.addEventListener("resize",y),()=>{a.cancel(),i(),l.removeEventListener("resize",y)}}class Z{constructor(){p(this,"lockCount",0);p(this,"restore",null);p(this,"timeoutLock",B.create());p(this,"timeoutUnlock",B.create());p(this,"release",()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)});p(this,"unlock",()=>{var t;this.lockCount===0&&this.restore&&((t=this.restore)==null||t.call(this),this.restore=null)})}acquire(t){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(t)),this.release}lock(t){if(this.lockCount===0||this.restore!==null)return;const r=S(t).documentElement,l=O(r).getComputedStyle(r).overflowY;if(l==="hidden"||l==="clip"){this.restore=M;return}const s=K||!V(t);this.restore=s?J(t):Q(t)}}const ee=new Z;function te(c){const{enabled:t=!0,mounted:e,open:r,referenceElement:l=null}=c;H(()=>{if(t&&X&&e&&!r){const s=S(l),f=s.body.style.userSelect,a=s.body.style.webkitUserSelect;return s.body.style.userSelect="none",s.body.style.webkitUserSelect="none",()=>{s.body.style.userSelect=f,s.body.style.webkitUserSelect=a}}},[t,e,r,l]),H(()=>{if(t)return ee.acquire(l)},[t,l])}const me=({closeButtonTitle:c,children:t})=>{const e=u.useRef(null),r=u.useRef(null),l=u.useRef(null),s=u.useRef(null),f=u.useRef(null),a=u.useRef(!1),w=u.useRef(!1),i=q(Y),y=()=>{const o=e.current;e.current=null,o&&o instanceof HTMLElement&&"focus"in o&&P(o.focus)&&o.focus({preventScroll:!0})},k=()=>{!i||a.current||(y(),Y.set(!1),w.current=!1)},v=()=>{i&&(w.current=!0,a.current=!1,k())},b=u.useEffectEvent(()=>{i&&(a.current=!0)}),d=u.useEffectEvent(()=>{i&&(a.current=!1)}),g=u.useEffectEvent(o=>{if(!(i&&f.current)||w.current)return;const n=o.target;!(n&&n instanceof HTMLElement)||f.current.contains(n)||v()});u.useLayoutEffect(()=>{const o={passive:!0},n="focus",h="blur",x="focusin";return I.set(!0),window.addEventListener(h,b,o),window.addEventListener(n,d,o),document.addEventListener(x,g,o),()=>{I.set(!1),window.removeEventListener(h,b,o),window.removeEventListener(n,d,o),document.removeEventListener(x,g,o)}},[]),u.useLayoutEffect(()=>{if(!(i&&s.current))return $;e.current=document.activeElement,(l.current?l.current:s.current).focus({preventScroll:!0})},[i]),te({enabled:i,mounted:!0,open:i,referenceElement:r.current});const E=o=>{r.current=o;let n;if(o){const h=()=>o.querySelector("iframe");s.current=h(),s.current||(n=new MutationObserver(()=>{s.current=h(),n==null||n.disconnect(),n=void 0}),n.observe(o,{childList:!0}))}return()=>{n==null||n.disconnect(),n=void 0,e.current=null,r.current=null,s.current=null,a.current=!1}},L=o=>{if(i)switch(o.key){case"Escape":o.preventDefault(),v();return;default:return}},C=o=>{if(i)switch(!0){case(o.shiftKey&&o.key==="Tab"):o.preventDefault(),y();return;default:return}};return m.jsxs("div",{"aria-hidden":!i,className:j("pointer-events-none w-full select-none opacity-0 transition-opacity",D({"pointer-events-auto select-auto opacity-100":i})),ref:f,role:"none",children:[m.jsx("div",{"aria-hidden":"true",className:"fixed inset-0 min-h-dvh select-none bg-backdrop text-on-backdrop opacity-20 transition-all duration-150 supports-[-webkit-touch-callout:none]:absolute",onClick:v,role:"none"}),m.jsx("div",{"aria-modal":"true",className:"fixed inset-0 m-auto flex max-h-screen min-h-screen w-full min-w-0 flex-col overflow-y-auto bg-[#132d40] text-on-secondary shadow outline-offset-0 2xl:max-h-[calc(100vh-4rem)] 2xl:min-h-0 2xl:max-w-270 2xl:rounded-2xl 2xl:outline-2 2xl:outline-primary",id:G,onKeyDown:L,ref:E,role:"dialog",tabIndex:-1,children:m.jsxs("div",{className:"relative h-full w-full overflow-auto",role:"none",children:[m.jsxs("div",{className:"relative z-10 h-full w-full grow",role:"none",children:[m.jsx("div",{className:"pointer-events-none absolute inset-0 h-full w-full select-none border-none outline-transparent",onKeyDown:C,ref:l,role:"none",tabIndex:0}),t]}),m.jsx("div",{className:"absolute top-0 right-2 z-50 2xl:top-0 2xl:right-0 rtl:right-auto rtl:left-2 rtl:2xl:right-auto rtl:2xl:left-0",role:"none",children:m.jsx("button",{"aria-label":c,className:j("cursor-pointer rounded-2xl p-4 outline-offset-0",D({hidden:!i})),onClick:v,type:"button",children:m.jsx(_,{height:"24",id:"close_current_color",width:"24"})})})]})})]})};export{me as BookingFormDialogWrapper};
